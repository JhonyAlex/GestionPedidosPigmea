2026-01-29T23:24:29.980Z ğŸ“¨ [7] GET /api/analysis/instructions - User: anonymous - 2026-01-29T23:24:29.979Z
2026-01-29T23:24:29.981Z ğŸ“¨ [8] GET /api/vendedores - User: b24fa21c-f2b2-4034-b10c-c0e65c09019e - 2026-01-29T23:24:29.981Z
2026-01-29T23:24:29.985Z ğŸ” Verificando permiso 'vendedores.view' para usuario ID: b24fa21c-f2b2-4034-b10c-c0e65c09019e
2026-01-29T23:24:29.985Z ğŸ‘‘ Usuario administrador - TODOS LOS PERMISOS CONCEDIDOS
2026-01-29T23:24:34.422Z ğŸ“¨ [9] GET /api/vendedores - User: b24fa21c-f2b2-4034-b10c-c0e65c09019e - 2026-01-29T23:24:34.422Z
2026-01-29T23:24:34.423Z ğŸ” Verificando permiso 'vendedores.view' para usuario ID: b24fa21c-f2b2-4034-b10c-c0e65c09019e
2026-01-29T23:24:34.423Z ğŸ‘‘ Usuario administrador - TODOS LOS PERMISOS CONCEDIDOS
2026-01-29T23:24:42.552Z ğŸ“¨ [10] GET /api/pedidos - User: b24fa21c-f2b2-4034-b10c-c0e65c09019e - 2026-01-29T23:24:42.551Z
2026-01-29T23:24:42.554Z ğŸ“¨ [11] GET /api/audit - User: b24fa21c-f2b2-4034-b10c-c0e65c09019e - 2026-01-29T23:24:42.553Z
2026-01-29T23:24:42.557Z ğŸ“¨ [12] GET /api/notifications - User: b24fa21c-f2b2-4034-b10c-c0e65c09019e - 2026-01-29T23:24:42.557Z
2026-01-29T23:24:42.564Z ğŸ“Š [2026-01-29T23:24:42.560Z] GET /api/pedidos (LEGACY) - Total: 0 pedidos
2026-01-29T23:24:42.593Z ğŸ”— Nueva conexiÃ³n al pool establecida
2026-01-29T23:24:42.600Z ğŸ”— Nueva conexiÃ³n al pool establecida
2026-01-29T23:24:42.612Z ğŸ“¨ [13] GET /api/vendedores - User: b24fa21c-f2b2-4034-b10c-c0e65c09019e - 2026-01-29T23:24:42.612Z
2026-01-29T23:24:42.613Z ğŸ” Verificando permiso 'vendedores.view' para usuario ID: b24fa21c-f2b2-4034-b10c-c0e65c09019e
2026-01-29T23:24:42.613Z ğŸ‘‘ Usuario administrador - TODOS LOS PERMISOS CONCEDIDOS
2026-01-29T23:24:42.617Z ğŸ“¨ [14] GET /api/clientes/simple - User: b24fa21c-f2b2-4034-b10c-c0e65c09019e - 2026-01-29T23:24:42.614Z
2026-01-29T23:24:42.617Z ğŸ” Verificando permiso 'clientes.view' para usuario ID: b24fa21c-f2b2-4034-b10c-c0e65c09019e
2026-01-29T23:24:42.617Z ğŸ‘‘ Usuario administrador - TODOS LOS PERMISOS CONCEDIDOS
2026-01-29T23:24:42.623Z ğŸ“Š [getAllClientesSimple] Total clientes encontrados: 0
2026-01-29T23:24:42.683Z ğŸ“¨ [15] GET /api/notifications - User: b24fa21c-f2b2-4034-b10c-c0e65c09019e - 2026-01-29T23:24:42.682Z
2026-01-29T23:24:48.139Z ğŸ“¨ [16] GET /api/vendedores - User: b24fa21c-f2b2-4034-b10c-c0e65c09019e - 2026-01-29T23:24:48.137Z
2026-01-29T23:24:48.142Z ğŸ” Verificando permiso 'vendedores.view' para usuario ID: b24fa21c-f2b2-4034-b10c-c0e65c09019e
2026-01-29T23:24:48.142Z ğŸ‘‘ Usuario administrador - TODOS LOS PERMISOS CONCEDIDOS
2026-01-29T23:24:48.144Z ğŸ“¨ [17] GET /api/clientes/simple - User: b24fa21c-f2b2-4034-b10c-c0e65c09019e - 2026-01-29T23:24:48.144Z
2026-01-29T23:24:48.146Z ğŸ” Verificando permiso 'clientes.view' para usuario ID: b24fa21c-f2b2-4034-b10c-c0e65c09019e
2026-01-29T23:24:48.146Z ğŸ‘‘ Usuario administrador - TODOS LOS PERMISOS CONCEDIDOS
2026-01-29T23:24:48.146Z ğŸ“¨ [18] GET /api/observaciones/templates - User: b24fa21c-f2b2-4034-b10c-c0e65c09019e - 2026-01-29T23:24:48.145Z
2026-01-29T23:24:48.151Z ğŸ“Š [getAllClientesSimple] Total clientes encontrados: 0
2026-01-29T23:24:58.853Z ğŸ“¨ [19] POST /api/clientes - User: b24fa21c-f2b2-4034-b10c-c0e65c09019e - 2026-01-29T23:24:58.852Z
2026-01-29T23:24:58.855Z ğŸ” requirePermission middleware
2026-01-29T23:24:58.855Z - Ruta: POST /api/clientes
2026-01-29T23:24:58.855Z - Permiso requerido: clientes.create
2026-01-29T23:24:58.855Z - Usuario: b24fa21c-f2b2-4034-b10c-c0e65c09019e (ADMIN)
2026-01-29T23:24:58.857Z - Headers: {
2026-01-29T23:24:58.857Z userId: 'b24fa21c-f2b2-4034-b10c-c0e65c09019e',
2026-01-29T23:24:58.857Z userRole: 'Administrador'
2026-01-29T23:24:58.857Z }
2026-01-29T23:24:58.857Z - Permisos a verificar (incluyendo aliases): [ 'clientes.create', 'vista.clientes' ]
2026-01-29T23:24:58.857Z - Verificando permiso en BD...
2026-01-29T23:24:58.857Z ğŸ” Verificando permiso 'clientes.create' para usuario ID: b24fa21c-f2b2-4034-b10c-c0e65c09019e
2026-01-29T23:24:58.858Z ğŸ‘‘ Usuario administrador - TODOS LOS PERMISOS CONCEDIDOS
2026-01-29T23:24:58.858Z - âœ… Usuario tiene permiso: clientes.create
2026-01-29T23:24:58.858Z - Resultado: âœ… PERMITIDO
2026-01-29T23:24:58.858Z âœ… Permiso concedido - continuando con la request
2026-01-29T23:24:58.858Z ğŸ” POST /api/clientes - Datos recibidos: {
2026-01-29T23:24:58.858Z "nombre": "Prueba",
2026-01-29T23:24:58.858Z "razon_social": "",
2026-01-29T23:24:58.858Z "cif": "",
2026-01-29T23:24:58.858Z "direccion": "",
2026-01-29T23:24:58.858Z "poblacion": "",
2026-01-29T23:24:58.858Z "codigo_postal": "",
2026-01-29T23:24:58.858Z "provincia": "",
2026-01-29T23:24:58.858Z "pais": "EspaÃ±a",
2026-01-29T23:24:58.858Z "telefono": "",
2026-01-29T23:24:58.858Z "email": "",
2026-01-29T23:24:58.858Z "persona_contacto": "",
2026-01-29T23:24:58.859Z "observaciones": ""
2026-01-29T23:24:58.859Z }
2026-01-29T23:24:58.859Z ğŸ” Database initialized: true
2026-01-29T23:24:58.859Z ğŸ” createCliente - Datos recibidos: {
2026-01-29T23:24:58.859Z "nombre": "Prueba",
2026-01-29T23:24:58.859Z "razon_social": "",
2026-01-29T23:24:58.859Z "cif": "",
2026-01-29T23:24:58.859Z "direccion": "",
2026-01-29T23:24:58.859Z "poblacion": "",
2026-01-29T23:24:58.859Z "codigo_postal": "",
2026-01-29T23:24:58.859Z "provincia": "",
2026-01-29T23:24:58.859Z "pais": "EspaÃ±a",
2026-01-29T23:24:58.859Z "telefono": "",
2026-01-29T23:24:58.859Z "email": "",
2026-01-29T23:24:58.859Z "persona_contacto": "",
2026-01-29T23:24:58.859Z "observaciones": "",
2026-01-29T23:24:58.859Z "_changedBy": "admin",
2026-01-29T23:24:58.859Z "_userRole": "ADMIN"
2026-01-29T23:24:58.859Z }
2026-01-29T23:24:58.860Z ğŸ” createCliente - Query:
2026-01-29T23:24:58.860Z INSERT INTO clientes (nombre, razon_social, cif, telefono, email, direccion_fiscal, codigo_postal, poblacion, provincia, pais, persona_contacto, notas, estado)
2026-01-29T23:24:58.860Z VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13)
2026-01-29T23:24:58.860Z RETURNING *;
2026-01-29T23:24:58.863Z ğŸ” createCliente - Values: [
2026-01-29T23:24:58.863Z 'Prueba', null,
2026-01-29T23:24:58.863Z null,     null,
2026-01-29T23:24:58.863Z null,     null,
2026-01-29T23:24:58.863Z null,     null,
2026-01-29T23:24:58.864Z null,     'EspaÃ±a',
2026-01-29T23:24:58.864Z null,     null,
2026-01-29T23:24:58.864Z 'Activo'
2026-01-29T23:24:58.864Z ]
2026-01-29T23:24:58.867Z âŒ Error in POST /api/clientes:
2026-01-29T23:24:58.867Z Error message: relation "clientes" does not exist
2026-01-29T23:24:58.867Z Error code: 42P01
2026-01-29T23:24:58.867Z Error detail: undefined
2026-01-29T23:24:58.870Z Stack trace: error: relation "clientes" does not exist
2026-01-29T23:24:58.870Z at /app/backend/node_modules/pg/lib/client.js:545:17
2026-01-29T23:24:58.870Z at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
2026-01-29T23:24:58.870Z at async PostgreSQLClient.createCliente (/app/backend/postgres-client.js:1967:28)
2026-01-29T23:24:58.870Z at async /app/backend/index.js:4089:28